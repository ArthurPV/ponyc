name: Cirrus CI failures

on:
  check_suite:
    type: ['completed']

jobs:
  send-failure-notification-to-zulip:
    name: Send Cirrus CI failure to Zulip
    if: github.event.check_suite.app.name == 'Cirrus CI' && github.event.check_suite.conclusion == 'failure'
    runs-on: ubuntu-latest
    steps:
      - name: Log event
        run: echo "$EVENT"
        env:
          EVENT: ${{ toJson(github.event) }}
